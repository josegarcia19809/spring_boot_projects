<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <title>Formulario Proyecto</title>
    <!-- Bootstrap CSS -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
</head>
<body class="bg-light">

<div class="container mt-5">
    <div class="card shadow">
        <div class="card-body">

            <!-- FORM CREAR -->
            <form th:if="${proyecto.id} == null"
                  th:object="${proyecto}"
                  th:action="@{/proyectos/guardar}"
                  method="post">

                <!-- Encabezado -->
                <h2 class="mb-3 text-danger" th:if="${#fields.hasErrors()}">‚ö†Ô∏è Corrige los errores</h2>
                <h2 class="mb-3" th:if="${!#fields.hasErrors()}">‚ûï Nuevo Proyecto</h2>

                <!-- NOMBRE -->
                <div class="mb-3">
                    <label for="nombre" class="form-label">üìå Nombre:</label>
                    <input type="text" id="nombre" th:field="*{nombre}" placeholder="Nombre del proyecto"
                           class="form-control"/>
                    <div th:if="${#fields.hasErrors('nombre')}" th:errors="*{nombre}" class="text-danger small"></div>
                </div>

                <!-- EMPRESA -->
                <div class="mb-3">
                    <label for="empresa" class="form-label">üè¢ Empresa:</label>
                    <input type="text" id="empresa" th:field="*{empresa}" placeholder="Empresa responsable"
                           class="form-control"/>
                    <div th:if="${#fields.hasErrors('empresa')}" th:errors="*{empresa}" class="text-danger small"></div>
                </div>

                <!-- DESCRIPCI√ìN -->
                <div class="mb-3">
                    <label for="descripcion" class="form-label">üìù Descripci√≥n:</label>
                    <textarea id="descripcion" th:field="*{descripcion}" placeholder="Breve descripci√≥n"
                              class="form-control"></textarea>
                    <div th:if="${#fields.hasErrors('descripcion')}" th:errors="*{descripcion}" class="text-danger small"></div>
                </div>

                <!-- ERRORES GLOBALES -->
                <div th:if="${#fields.hasGlobalErrors()}" class="alert alert-danger"
                     th:each="e : ${#fields.globalErrors()}" th:text="${e}">
                </div>

                <!-- BOTONES -->
                <div class="d-flex justify-content-between">
                    <button type="submit" class="btn btn-success">üíæ Guardar</button>
                    <a th:href="@{/proyectos}" class="btn btn-secondary">‚Ü©Ô∏è Cancelar</a>
                </div>
            </form>

            <!-- FORM EDITAR -->
            <form th:if="${proyecto.id} != null"
                  th:object="${proyecto}"
                  th:action="@{'/proyectos/editar/' + ${proyecto.id}}"
                  method="post">

                <!-- Encabezado -->
                <h2 class="mb-3 text-danger" th:if="${#fields.hasErrors()}">‚ö†Ô∏è Corrige los errores</h2>
                <h2 class="mb-3" th:if="${!#fields.hasErrors()}">‚úèÔ∏è Editar Proyecto</h2>

                <!-- NOMBRE -->
                <div class="mb-3">
                    <label for="nombre" class="form-label">üìå Nombre:</label>
                    <input type="text" id="nombre" th:field="*{nombre}" placeholder="Nombre del proyecto"
                           class="form-control"/>
                    <div th:if="${#fields.hasErrors('nombre')}" th:errors="*{nombre}" class="text-danger small"></div>
                </div>

                <!-- EMPRESA -->
                <div class="mb-3">
                    <label for="empresa" class="form-label">üè¢ Empresa:</label>
                    <input type="text" id="empresa" th:field="*{empresa}" placeholder="Empresa responsable"
                           class="form-control"/>
                    <div th:if="${#fields.hasErrors('empresa')}" th:errors="*{empresa}" class="text-danger small"></div>
                </div>

                <!-- DESCRIPCI√ìN -->
                <div class="mb-3">
                    <label for="descripcion" class="form-label">üìù Descripci√≥n:</label>
                    <textarea id="descripcion" th:field="*{descripcion}" placeholder="Breve descripci√≥n"
                              class="form-control"></textarea>
                    <div th:if="${#fields.hasErrors('descripcion')}" th:errors="*{descripcion}" class="text-danger small"></div>
                </div>

                <!-- ERRORES GLOBALES -->
                <div th:if="${#fields.hasGlobalErrors()}" class="alert alert-danger"
                     th:each="e : ${#fields.globalErrors()}" th:text="${e}">
                </div>

                <!-- BOTONES -->
                <div class="d-flex justify-content-between">
                    <button type="submit" class="btn btn-primary">‚úèÔ∏è Actualizar</button>
                    <a th:href="@{/proyectos}" class="btn btn-secondary">‚Ü©Ô∏è Cancelar</a>
                </div>
            </form>
        </div>
    </div>
</div>

<!-- Bootstrap JS -->
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>
</body>
</html>
